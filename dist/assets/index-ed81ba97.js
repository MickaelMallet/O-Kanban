(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ut(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,o)}return t}function G(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ut(Object(t),!0).forEach(function(o){kt(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ut(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function ke(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ke=function(e){return typeof e}:ke=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(n)}function kt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Z(){return Z=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Z.apply(this,arguments)}function qt(n,e){if(n==null)return{};var t={},o=Object.keys(n),r,a;for(a=0;a<o.length;a++)r=o[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Bt(n,e){if(n==null)return{};var t=qt(n,e),o,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)o=a[r],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(n,o)&&(t[o]=n[o])}return t}var Xt="1.15.0";function K(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Q=K(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ae=K(/Edge/i),ft=K(/firefox/i),Ce=K(/safari/i)&&!K(/chrome/i)&&!K(/android/i),yt=K(/iP(ad|od|hone)/i),wt=K(/chrome/i)&&K(/android/i),St={capture:!1,passive:!1};function E(n,e,t){n.addEventListener(e,t,!Q&&St)}function b(n,e,t){n.removeEventListener(e,t,!Q&&St)}function Re(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function $t(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function H(n,e,t,o){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&Re(n,e):Re(n,e))||o&&n===t)return n;if(n===t)break}while(n=$t(n))}return null}var ht=/\s+/g;function N(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var o=(" "+n.className+" ").replace(ht," ").replace(" "+e+" "," ");n.className=(o+(t?" "+e:"")).replace(ht," ")}}function m(n,e,t){var o=n&&n.style;if(o){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=t+(typeof t=="string"?"":"px")}}function me(n,e){var t="";if(typeof n=="string")t=n;else do{var o=m(n,"transform");o&&o!=="none"&&(t=o+" "+t)}while(!e&&(n=n.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(t)}function Dt(n,e,t){if(n){var o=n.getElementsByTagName(e),r=0,a=o.length;if(t)for(;r<a;r++)t(o[r],r);return o}return[]}function W(){var n=document.scrollingElement;return n||document.documentElement}function T(n,e,t,o,r){if(!(!n.getBoundingClientRect&&n!==window)){var a,i,l,s,d,f,u;if(n!==window&&n.parentNode&&n!==W()?(a=n.getBoundingClientRect(),i=a.top,l=a.left,s=a.bottom,d=a.right,f=a.height,u=a.width):(i=0,l=0,s=window.innerHeight,d=window.innerWidth,f=window.innerHeight,u=window.innerWidth),(e||t)&&n!==window&&(r=r||n.parentNode,!Q))do if(r&&r.getBoundingClientRect&&(m(r,"transform")!=="none"||t&&m(r,"position")!=="static")){var g=r.getBoundingClientRect();i-=g.top+parseInt(m(r,"border-top-width")),l-=g.left+parseInt(m(r,"border-left-width")),s=i+a.height,d=l+a.width;break}while(r=r.parentNode);if(o&&n!==window){var w=me(r||n),v=w&&w.a,y=w&&w.d;w&&(i/=y,l/=v,u/=v,f/=y,s=i+f,d=l+u)}return{top:i,left:l,bottom:s,right:d,width:u,height:f}}}function mt(n,e,t){for(var o=oe(n,!0),r=T(n)[e];o;){var a=T(o)[t],i=void 0;if(t==="top"||t==="left"?i=r>=a:i=r<=a,!i)return o;if(o===W())break;o=oe(o,!1)}return!1}function pe(n,e,t,o){for(var r=0,a=0,i=n.children;a<i.length;){if(i[a].style.display!=="none"&&i[a]!==h.ghost&&(o||i[a]!==h.dragged)&&H(i[a],t.draggable,n,!1)){if(r===e)return i[a];r++}a++}return null}function it(n,e){for(var t=n.lastElementChild;t&&(t===h.ghost||m(t,"display")==="none"||e&&!Re(t,e));)t=t.previousElementSibling;return t||null}function B(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==h.clone&&(!e||Re(n,e))&&t++;return t}function pt(n){var e=0,t=0,o=W();if(n)do{var r=me(n),a=r.a,i=r.d;e+=n.scrollLeft*a,t+=n.scrollTop*i}while(n!==o&&(n=n.parentNode));return[e,t]}function Rt(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===n[t][o])return Number(t)}return-1}function oe(n,e){if(!n||!n.getBoundingClientRect)return W();var t=n,o=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var r=m(t);if(t.clientWidth<t.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return W();if(o||e)return t;o=!0}}while(t=t.parentNode);return W()}function Yt(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function ze(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var _e;function Ct(n,e){return function(){if(!_e){var t=arguments,o=this;t.length===1?n.call(o,t[0]):n.apply(o,t),_e=setTimeout(function(){_e=void 0},e)}}}function Ht(){clearTimeout(_e),_e=void 0}function _t(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function Tt(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}var q="Sortable"+new Date().getTime();function jt(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(r){if(!(m(r,"display")==="none"||r===h.ghost)){n.push({target:r,rect:T(r)});var a=G({},n[n.length-1].rect);if(r.thisAnimationDuration){var i=me(r,!0);i&&(a.top-=i.f,a.left-=i.e)}r.fromRect=a}})}},addAnimationState:function(o){n.push(o)},removeAnimationState:function(o){n.splice(Rt(n,{target:o}),1)},animateAll:function(o){var r=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var a=!1,i=0;n.forEach(function(l){var s=0,d=l.target,f=d.fromRect,u=T(d),g=d.prevFromRect,w=d.prevToRect,v=l.rect,y=me(d,!0);y&&(u.top-=y.f,u.left-=y.e),d.toRect=u,d.thisAnimationDuration&&ze(g,u)&&!ze(f,u)&&(v.top-u.top)/(v.left-u.left)===(f.top-u.top)/(f.left-u.left)&&(s=Gt(v,g,w,r.options)),ze(u,f)||(d.prevFromRect=f,d.prevToRect=u,s||(s=r.options.animation),r.animate(d,v,u,s)),s&&(a=!0,i=Math.max(i,s),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},s),d.thisAnimationDuration=s)}),clearTimeout(e),a?e=setTimeout(function(){typeof o=="function"&&o()},i):typeof o=="function"&&o(),n=[]},animate:function(o,r,a,i){if(i){m(o,"transition",""),m(o,"transform","");var l=me(this.el),s=l&&l.a,d=l&&l.d,f=(r.left-a.left)/(s||1),u=(r.top-a.top)/(d||1);o.animatingX=!!f,o.animatingY=!!u,m(o,"transform","translate3d("+f+"px,"+u+"px,0)"),this.forRepaintDummy=Wt(o),m(o,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),m(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){m(o,"transition",""),m(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},i)}}}}function Wt(n){return n.offsetWidth}function Gt(n,e,t,o){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*o.animation}var ce=[],Ue={initializeByDefault:!0},Oe={mount:function(e){for(var t in Ue)Ue.hasOwnProperty(t)&&!(t in e)&&(e[t]=Ue[t]);ce.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ce.push(e)},pluginEvent:function(e,t,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var a=e+"Global";ce.forEach(function(i){t[i.pluginName]&&(t[i.pluginName][a]&&t[i.pluginName][a](G({sortable:t},o)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](G({sortable:t},o)))})},initializePlugins:function(e,t,o,r){ce.forEach(function(l){var s=l.pluginName;if(!(!e.options[s]&&!l.initializeByDefault)){var d=new l(e,t,e.options);d.sortable=e,d.options=e.options,e[s]=d,Z(o,d.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);typeof i<"u"&&(e.options[a]=i)}},getEventProperties:function(e,t){var o={};return ce.forEach(function(r){typeof r.eventProperties=="function"&&Z(o,r.eventProperties.call(t[r.pluginName],e))}),o},modifyOption:function(e,t,o){var r;return ce.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[t]=="function"&&(r=a.optionListeners[t].call(e[a.pluginName],o))}),r}};function zt(n){var e=n.sortable,t=n.rootEl,o=n.name,r=n.targetEl,a=n.cloneEl,i=n.toEl,l=n.fromEl,s=n.oldIndex,d=n.newIndex,f=n.oldDraggableIndex,u=n.newDraggableIndex,g=n.originalEvent,w=n.putSortable,v=n.extraEventProperties;if(e=e||t&&t[q],!!e){var y,X=e.options,z="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Q&&!Ae?y=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(o,!0,!0)),y.to=i||t,y.from=l||t,y.item=r||t,y.clone=a,y.oldIndex=s,y.newIndex=d,y.oldDraggableIndex=f,y.newDraggableIndex=u,y.originalEvent=g,y.pullMode=w?w.lastPutMode:void 0;var A=G(G({},v),Oe.getEventProperties(o,e));for(var $ in A)y[$]=A[$];t&&t.dispatchEvent(y),X[z]&&X[z].call(e,y)}}var Ut=["evt"],M=function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.evt,a=Bt(o,Ut);Oe.pluginEvent.bind(h)(e,t,G({dragEl:c,parentEl:C,ghostEl:p,rootEl:S,nextEl:de,lastDownEl:qe,cloneEl:D,cloneHidden:ne,dragStarted:we,putSortable:I,activeSortable:h.active,originalEvent:r,oldIndex:he,oldDraggableIndex:Te,newIndex:k,newDraggableIndex:te,hideGhostForTarget:Ot,unhideGhostForTarget:Pt,cloneNowHidden:function(){ne=!0},cloneNowShown:function(){ne=!1},dispatchSortableEvent:function(l){O({sortable:t,name:l,originalEvent:r})}},a))};function O(n){zt(G({putSortable:I,cloneEl:D,targetEl:c,rootEl:S,oldIndex:he,oldDraggableIndex:Te,newIndex:k,newDraggableIndex:te},n))}var c,C,p,S,de,qe,D,ne,he,k,Te,te,Me,I,fe=!1,Ye=!1,He=[],le,R,Ve,Ke,gt,vt,we,ue,Ie,Le=!1,xe=!1,Be,L,Ze=[],nt=!1,je=[],Ge=typeof document<"u",Fe=yt,bt=Ae||Q?"cssFloat":"float",Vt=Ge&&!wt&&!yt&&"draggable"in document.createElement("div"),It=function(){if(Ge){if(Q)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Lt=function(e,t){var o=m(e),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),a=pe(e,0,t),i=pe(e,1,t),l=a&&m(a),s=i&&m(i),d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+T(a).width,f=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+T(i).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&l.float&&l.float!=="none"){var u=l.float==="left"?"left":"right";return i&&(s.clear==="both"||s.clear===u)?"vertical":"horizontal"}return a&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||d>=r&&o[bt]==="none"||i&&o[bt]==="none"&&d+f>r)?"vertical":"horizontal"},Kt=function(e,t,o){var r=o?e.left:e.top,a=o?e.right:e.bottom,i=o?e.width:e.height,l=o?t.left:t.top,s=o?t.right:t.bottom,d=o?t.width:t.height;return r===l||a===s||r+i/2===l+d/2},Zt=function(e,t){var o;return He.some(function(r){var a=r[q].options.emptyInsertThreshold;if(!(!a||it(r))){var i=T(r),l=e>=i.left-a&&e<=i.right+a,s=t>=i.top-a&&t<=i.bottom+a;if(l&&s)return o=r}}),o},At=function(e){function t(a,i){return function(l,s,d,f){var u=l.options.group.name&&s.options.group.name&&l.options.group.name===s.options.group.name;if(a==null&&(i||u))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return t(a(l,s,d,f),i)(l,s,d,f);var g=(i?l:s).options.group.name;return a===!0||typeof a=="string"&&a===g||a.join&&a.indexOf(g)>-1}}var o={},r=e.group;(!r||ke(r)!="object")&&(r={name:r}),o.name=r.name,o.checkPull=t(r.pull,!0),o.checkPut=t(r.put),o.revertClone=r.revertClone,e.group=o},Ot=function(){!It&&p&&m(p,"display","none")},Pt=function(){!It&&p&&m(p,"display","")};Ge&&!wt&&document.addEventListener("click",function(n){if(Ye)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),Ye=!1,!1},!0);var se=function(e){if(c){e=e.touches?e.touches[0]:e;var t=Zt(e.clientX,e.clientY);if(t){var o={};for(var r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[q]._onDragOver(o)}}},Qt=function(e){c&&c.parentNode[q]._isOutsideThisEl(e.target)};function h(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Z({},e),n[q]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Lt(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,l){i.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:h.supportPointer!==!1&&"PointerEvent"in window&&!Ce,emptyInsertThreshold:5};Oe.initializePlugins(this,n,t);for(var o in t)!(o in e)&&(e[o]=t[o]);At(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:Vt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?E(n,"pointerdown",this._onTapStart):(E(n,"mousedown",this._onTapStart),E(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(E(n,"dragover",this),E(n,"dragenter",this)),He.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Z(this,jt())}h.prototype={constructor:h,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ue=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,c):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,o=this.el,r=this.options,a=r.preventOnFilter,i=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,s=(l||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,f=r.filter;if(ln(o),!c&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||r.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Ce&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=H(s,r.draggable,o,!1),!(s&&s.animated)&&qe!==s)){if(he=B(s),Te=B(s,r.draggable),typeof f=="function"){if(f.call(this,e,s,this)){O({sortable:t,rootEl:d,name:"filter",targetEl:s,toEl:o,fromEl:o}),M("filter",t,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(u){if(u=H(d,u.trim(),o,!1),u)return O({sortable:t,rootEl:u,name:"filter",targetEl:s,fromEl:o,toEl:o}),M("filter",t,{evt:e}),!0}),f)){a&&e.cancelable&&e.preventDefault();return}r.handle&&!H(d,r.handle,o,!1)||this._prepareDragStart(e,l,s)}}},_prepareDragStart:function(e,t,o){var r=this,a=r.el,i=r.options,l=a.ownerDocument,s;if(o&&!c&&o.parentNode===a){var d=T(o);if(S=a,c=o,C=c.parentNode,de=c.nextSibling,qe=o,Me=i.group,h.dragged=c,le={target:c,clientX:(t||e).clientX,clientY:(t||e).clientY},gt=le.clientX-d.left,vt=le.clientY-d.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,c.style["will-change"]="all",s=function(){if(M("delayEnded",r,{evt:e}),h.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!ft&&r.nativeDraggable&&(c.draggable=!0),r._triggerDragStart(e,t),O({sortable:r,name:"choose",originalEvent:e}),N(c,i.chosenClass,!0)},i.ignore.split(",").forEach(function(f){Dt(c,f.trim(),Qe)}),E(l,"dragover",se),E(l,"mousemove",se),E(l,"touchmove",se),E(l,"mouseup",r._onDrop),E(l,"touchend",r._onDrop),E(l,"touchcancel",r._onDrop),ft&&this.nativeDraggable&&(this.options.touchStartThreshold=4,c.draggable=!0),M("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ae||Q))){if(h.eventCanceled){this._onDrop();return}E(l,"mouseup",r._disableDelayedDrag),E(l,"touchend",r._disableDelayedDrag),E(l,"touchcancel",r._disableDelayedDrag),E(l,"mousemove",r._delayedDragTouchMoveHandler),E(l,"touchmove",r._delayedDragTouchMoveHandler),i.supportPointer&&E(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(s,i.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){c&&Qe(c),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._disableDelayedDrag),b(e,"touchend",this._disableDelayedDrag),b(e,"touchcancel",this._disableDelayedDrag),b(e,"mousemove",this._delayedDragTouchMoveHandler),b(e,"touchmove",this._delayedDragTouchMoveHandler),b(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?E(document,"pointermove",this._onTouchMove):t?E(document,"touchmove",this._onTouchMove):E(document,"mousemove",this._onTouchMove):(E(c,"dragend",this),E(S,"dragstart",this._onDragStart));try{document.selection?Xe(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(fe=!1,S&&c){M("dragStarted",this,{evt:t}),this.nativeDraggable&&E(document,"dragover",Qt);var o=this.options;!e&&N(c,o.dragClass,!1),N(c,o.ghostClass,!0),h.active=this,e&&this._appendGhost(),O({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(R){this._lastX=R.clientX,this._lastY=R.clientY,Ot();for(var e=document.elementFromPoint(R.clientX,R.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(R.clientX,R.clientY),e!==t);)t=e;if(c.parentNode[q]._isOutsideThisEl(e),t)do{if(t[q]){var o=void 0;if(o=t[q]._onDragOver({clientX:R.clientX,clientY:R.clientY,target:e,rootEl:t}),o&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Pt()}},_onTouchMove:function(e){if(le){var t=this.options,o=t.fallbackTolerance,r=t.fallbackOffset,a=e.touches?e.touches[0]:e,i=p&&me(p,!0),l=p&&i&&i.a,s=p&&i&&i.d,d=Fe&&L&&pt(L),f=(a.clientX-le.clientX+r.x)/(l||1)+(d?d[0]-Ze[0]:0)/(l||1),u=(a.clientY-le.clientY+r.y)/(s||1)+(d?d[1]-Ze[1]:0)/(s||1);if(!h.active&&!fe){if(o&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(p){i?(i.e+=f-(Ve||0),i.f+=u-(Ke||0)):i={a:1,b:0,c:0,d:1,e:f,f:u};var g="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");m(p,"webkitTransform",g),m(p,"mozTransform",g),m(p,"msTransform",g),m(p,"transform",g),Ve=f,Ke=u,R=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!p){var e=this.options.fallbackOnBody?document.body:S,t=T(c,!0,Fe,!0,e),o=this.options;if(Fe){for(L=e;m(L,"position")==="static"&&m(L,"transform")==="none"&&L!==document;)L=L.parentNode;L!==document.body&&L!==document.documentElement?(L===document&&(L=W()),t.top+=L.scrollTop,t.left+=L.scrollLeft):L=W(),Ze=pt(L)}p=c.cloneNode(!0),N(p,o.ghostClass,!1),N(p,o.fallbackClass,!0),N(p,o.dragClass,!0),m(p,"transition",""),m(p,"transform",""),m(p,"box-sizing","border-box"),m(p,"margin",0),m(p,"top",t.top),m(p,"left",t.left),m(p,"width",t.width),m(p,"height",t.height),m(p,"opacity","0.8"),m(p,"position",Fe?"absolute":"fixed"),m(p,"zIndex","100000"),m(p,"pointerEvents","none"),h.ghost=p,e.appendChild(p),m(p,"transform-origin",gt/parseInt(p.style.width)*100+"% "+vt/parseInt(p.style.height)*100+"%")}},_onDragStart:function(e,t){var o=this,r=e.dataTransfer,a=o.options;if(M("dragStart",this,{evt:e}),h.eventCanceled){this._onDrop();return}M("setupClone",this),h.eventCanceled||(D=Tt(c),D.removeAttribute("id"),D.draggable=!1,D.style["will-change"]="",this._hideClone(),N(D,this.options.chosenClass,!1),h.clone=D),o.cloneId=Xe(function(){M("clone",o),!h.eventCanceled&&(o.options.removeCloneOnHide||S.insertBefore(D,c),o._hideClone(),O({sortable:o,name:"clone"}))}),!t&&N(c,a.dragClass,!0),t?(Ye=!0,o._loopId=setInterval(o._emulateDragOver,50)):(b(document,"mouseup",o._onDrop),b(document,"touchend",o._onDrop),b(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(o,r,c)),E(document,"drop",o),m(c,"transform","translateZ(0)")),fe=!0,o._dragStartId=Xe(o._dragStarted.bind(o,t,e)),E(document,"selectstart",o),we=!0,Ce&&m(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,o=e.target,r,a,i,l=this.options,s=l.group,d=h.active,f=Me===s,u=l.sort,g=I||d,w,v=this,y=!1;if(nt)return;function X(ye,Ft){M(ye,v,G({evt:e,isOwner:f,axis:w?"vertical":"horizontal",revert:i,dragRect:r,targetRect:a,canSort:u,fromSortable:g,target:o,completed:A,onMove:function(ct,Nt){return Ne(S,t,c,r,ct,T(ct),e,Nt)},changed:$},Ft))}function z(){X("dragOverAnimationCapture"),v.captureAnimationState(),v!==g&&g.captureAnimationState()}function A(ye){return X("dragOverCompleted",{insertion:ye}),ye&&(f?d._hideClone():d._showClone(v),v!==g&&(N(c,I?I.options.ghostClass:d.options.ghostClass,!1),N(c,l.ghostClass,!0)),I!==v&&v!==h.active?I=v:v===h.active&&I&&(I=null),g===v&&(v._ignoreWhileAnimating=o),v.animateAll(function(){X("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(o===c&&!c.animated||o===t&&!o.animated)&&(ue=null),!l.dragoverBubble&&!e.rootEl&&o!==document&&(c.parentNode[q]._isOutsideThisEl(e.target),!ye&&se(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),y=!0}function $(){k=B(c),te=B(c,l.draggable),O({sortable:v,name:"change",toEl:t,newIndex:k,newDraggableIndex:te,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=H(o,l.draggable,t,!0),X("dragOver"),h.eventCanceled)return y;if(c.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||v._ignoreWhileAnimating===o)return A(!1);if(Ye=!1,d&&!l.disabled&&(f?u||(i=C!==S):I===this||(this.lastPutMode=Me.checkPull(this,d,c,e))&&s.checkPut(this,d,c,e))){if(w=this._getDirection(e,o)==="vertical",r=T(c),X("dragOverValid"),h.eventCanceled)return y;if(i)return C=S,z(),this._hideClone(),X("revert"),h.eventCanceled||(de?S.insertBefore(c,de):S.appendChild(c)),A(!0);var x=it(t,l.draggable);if(!x||nn(e,w,this)&&!x.animated){if(x===c)return A(!1);if(x&&t===e.target&&(o=x),o&&(a=T(o)),Ne(S,t,c,r,o,a,e,!!o)!==!1)return z(),x&&x.nextSibling?t.insertBefore(c,x.nextSibling):t.appendChild(c),C=t,$(),A(!0)}else if(x&&tn(e,w,this)){var re=pe(t,0,l,!0);if(re===c)return A(!1);if(o=re,a=T(o),Ne(S,t,c,r,o,a,e,!1)!==!1)return z(),t.insertBefore(c,re),C=t,$(),A(!0)}else if(o.parentNode===t){a=T(o);var Y=0,ae,ge=c.parentNode!==t,F=!Kt(c.animated&&c.toRect||r,o.animated&&o.toRect||a,w),ve=w?"top":"left",J=mt(o,"top","top")||mt(c,"top","top"),be=J?J.scrollTop:void 0;ue!==o&&(ae=a[ve],Le=!1,xe=!F&&l.invertSwap||ge),Y=on(e,o,a,w,F?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,xe,ue===o);var U;if(Y!==0){var ie=B(c);do ie-=Y,U=C.children[ie];while(U&&(m(U,"display")==="none"||U===p))}if(Y===0||U===o)return A(!1);ue=o,Ie=Y;var Ee=o.nextElementSibling,ee=!1;ee=Y===1;var Pe=Ne(S,t,c,r,o,a,e,ee);if(Pe!==!1)return(Pe===1||Pe===-1)&&(ee=Pe===1),nt=!0,setTimeout(en,30),z(),ee&&!Ee?t.appendChild(c):o.parentNode.insertBefore(c,ee?Ee:o),J&&_t(J,0,be-J.scrollTop),C=c.parentNode,ae!==void 0&&!xe&&(Be=Math.abs(ae-T(o)[ve])),$(),A(!0)}if(t.contains(c))return A(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",se),b(document,"mousemove",se),b(document,"touchmove",se)},_offUpEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._onDrop),b(e,"touchend",this._onDrop),b(e,"pointerup",this._onDrop),b(e,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;if(k=B(c),te=B(c,o.draggable),M("drop",this,{evt:e}),C=c&&c.parentNode,k=B(c),te=B(c,o.draggable),h.eventCanceled){this._nulling();return}fe=!1,xe=!1,Le=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ot(this.cloneId),ot(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ce&&m(document.body,"user-select",""),m(c,"transform",""),e&&(we&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),p&&p.parentNode&&p.parentNode.removeChild(p),(S===C||I&&I.lastPutMode!=="clone")&&D&&D.parentNode&&D.parentNode.removeChild(D),c&&(this.nativeDraggable&&b(c,"dragend",this),Qe(c),c.style["will-change"]="",we&&!fe&&N(c,I?I.options.ghostClass:this.options.ghostClass,!1),N(c,this.options.chosenClass,!1),O({sortable:this,name:"unchoose",toEl:C,newIndex:null,newDraggableIndex:null,originalEvent:e}),S!==C?(k>=0&&(O({rootEl:C,name:"add",toEl:C,fromEl:S,originalEvent:e}),O({sortable:this,name:"remove",toEl:C,originalEvent:e}),O({rootEl:C,name:"sort",toEl:C,fromEl:S,originalEvent:e}),O({sortable:this,name:"sort",toEl:C,originalEvent:e})),I&&I.save()):k!==he&&k>=0&&(O({sortable:this,name:"update",toEl:C,originalEvent:e}),O({sortable:this,name:"sort",toEl:C,originalEvent:e})),h.active&&((k==null||k===-1)&&(k=he,te=Te),O({sortable:this,name:"end",toEl:C,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){M("nulling",this),S=c=C=p=de=D=qe=ne=le=R=we=k=te=he=Te=ue=Ie=I=Me=h.dragged=h.ghost=h.clone=h.active=null,je.forEach(function(e){e.checked=!0}),je.length=Ve=Ke=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":c&&(this._onDragOver(e),Jt(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,o=this.el.children,r=0,a=o.length,i=this.options;r<a;r++)t=o[r],H(t,i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||an(t));return e},sort:function(e,t){var o={},r=this.el;this.toArray().forEach(function(a,i){var l=r.children[i];H(l,this.options.draggable,r,!1)&&(o[a]=l)},this),t&&this.captureAnimationState(),e.forEach(function(a){o[a]&&(r.removeChild(o[a]),r.appendChild(o[a]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return H(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(t===void 0)return o[e];var r=Oe.modifyOption(this,e,t);typeof r<"u"?o[e]=r:o[e]=t,e==="group"&&At(o)},destroy:function(){M("destroy",this);var e=this.el;e[q]=null,b(e,"mousedown",this._onTapStart),b(e,"touchstart",this._onTapStart),b(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(e,"dragover",this),b(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),He.splice(He.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ne){if(M("hideClone",this),h.eventCanceled)return;m(D,"display","none"),this.options.removeCloneOnHide&&D.parentNode&&D.parentNode.removeChild(D),ne=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ne){if(M("showClone",this),h.eventCanceled)return;c.parentNode==S&&!this.options.group.revertClone?S.insertBefore(D,c):de?S.insertBefore(D,de):S.appendChild(D),this.options.group.revertClone&&this.animate(c,D),m(D,"display",""),ne=!1}}};function Jt(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function Ne(n,e,t,o,r,a,i,l){var s,d=n[q],f=d.options.onMove,u;return window.CustomEvent&&!Q&&!Ae?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=e,s.from=n,s.dragged=t,s.draggedRect=o,s.related=r||e,s.relatedRect=a||T(e),s.willInsertAfter=l,s.originalEvent=i,n.dispatchEvent(s),f&&(u=f.call(d,s,i)),u}function Qe(n){n.draggable=!1}function en(){nt=!1}function tn(n,e,t){var o=T(pe(t.el,0,t.options,!0)),r=10;return e?n.clientX<o.left-r||n.clientY<o.top&&n.clientX<o.right:n.clientY<o.top-r||n.clientY<o.bottom&&n.clientX<o.left}function nn(n,e,t){var o=T(it(t.el,t.options.draggable)),r=10;return e?n.clientX>o.right+r||n.clientX<=o.right&&n.clientY>o.bottom&&n.clientX>=o.left:n.clientX>o.right&&n.clientY>o.top||n.clientX<=o.right&&n.clientY>o.bottom+r}function on(n,e,t,o,r,a,i,l){var s=o?n.clientY:n.clientX,d=o?t.height:t.width,f=o?t.top:t.left,u=o?t.bottom:t.right,g=!1;if(!i){if(l&&Be<d*r){if(!Le&&(Ie===1?s>f+d*a/2:s<u-d*a/2)&&(Le=!0),Le)g=!0;else if(Ie===1?s<f+Be:s>u-Be)return-Ie}else if(s>f+d*(1-r)/2&&s<u-d*(1-r)/2)return rn(e)}return g=g||i,g&&(s<f+d*a/2||s>u-d*a/2)?s>f+d/2?1:-1:0}function rn(n){return B(c)<B(n)?1:-1}function an(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,o=0;t--;)o+=e.charCodeAt(t);return o.toString(36)}function ln(n){je.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var o=e[t];o.checked&&je.push(o)}}function Xe(n){return setTimeout(n,0)}function ot(n){return clearTimeout(n)}Ge&&E(document,"touchmove",function(n){(h.active||fe)&&n.cancelable&&n.preventDefault()});h.utils={on:E,off:b,css:m,find:Dt,is:function(e,t){return!!H(e,t,e,!1)},extend:Yt,throttle:Ct,closest:H,toggleClass:N,clone:Tt,index:B,nextTick:Xe,cancelNextTick:ot,detectDirection:Lt,getChild:pe};h.get=function(n){return n[q]};h.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(h.utils=G(G({},h.utils),o.utils)),Oe.mount(o)})};h.create=function(n,e){return new h(n,e)};h.version=Xt;var _=[],Se,rt,at=!1,Je,et,We,De;function sn(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var o=t.originalEvent;this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):this.options.supportPointer?E(document,"pointermove",this._handleFallbackAutoScroll):o.touches?E(document,"touchmove",this._handleFallbackAutoScroll):E(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var o=t.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),Et(),$e(),Ht()},nulling:function(){We=rt=Se=at=De=Je=et=null,_.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,o){var r=this,a=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(a,i);if(We=t,o||this.options.forceAutoScrollFallback||Ae||Q||Ce){tt(t,this.options,l,o);var s=oe(l,!0);at&&(!De||a!==Je||i!==et)&&(De&&Et(),De=setInterval(function(){var d=oe(document.elementFromPoint(a,i),!0);d!==s&&(s=d,$e()),tt(t,r.options,d,o)},10),Je=a,et=i)}else{if(!this.options.bubbleScroll||oe(l,!0)===W()){$e();return}tt(t,this.options,oe(l,!1),!1)}}},Z(n,{pluginName:"scroll",initializeByDefault:!0})}function $e(){_.forEach(function(n){clearInterval(n.pid)}),_=[]}function Et(){clearInterval(De)}var tt=Ct(function(n,e,t,o){if(e.scroll){var r=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,i=e.scrollSensitivity,l=e.scrollSpeed,s=W(),d=!1,f;rt!==t&&(rt=t,$e(),Se=e.scroll,f=e.scrollFn,Se===!0&&(Se=oe(t,!0)));var u=0,g=Se;do{var w=g,v=T(w),y=v.top,X=v.bottom,z=v.left,A=v.right,$=v.width,x=v.height,re=void 0,Y=void 0,ae=w.scrollWidth,ge=w.scrollHeight,F=m(w),ve=w.scrollLeft,J=w.scrollTop;w===s?(re=$<ae&&(F.overflowX==="auto"||F.overflowX==="scroll"||F.overflowX==="visible"),Y=x<ge&&(F.overflowY==="auto"||F.overflowY==="scroll"||F.overflowY==="visible")):(re=$<ae&&(F.overflowX==="auto"||F.overflowX==="scroll"),Y=x<ge&&(F.overflowY==="auto"||F.overflowY==="scroll"));var be=re&&(Math.abs(A-r)<=i&&ve+$<ae)-(Math.abs(z-r)<=i&&!!ve),U=Y&&(Math.abs(X-a)<=i&&J+x<ge)-(Math.abs(y-a)<=i&&!!J);if(!_[u])for(var ie=0;ie<=u;ie++)_[ie]||(_[ie]={});(_[u].vx!=be||_[u].vy!=U||_[u].el!==w)&&(_[u].el=w,_[u].vx=be,_[u].vy=U,clearInterval(_[u].pid),(be!=0||U!=0)&&(d=!0,_[u].pid=setInterval(function(){o&&this.layer===0&&h.active._onTouchMove(We);var Ee=_[this.layer].vy?_[this.layer].vy*l:0,ee=_[this.layer].vx?_[this.layer].vx*l:0;typeof f=="function"&&f.call(h.dragged.parentNode[q],ee,Ee,n,We,_[this.layer].el)!=="continue"||_t(_[this.layer].el,ee,Ee)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&g!==s&&(g=oe(g,!1)));at=d}},30),Mt=function(e){var t=e.originalEvent,o=e.putSortable,r=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,l=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var d=o||a;l();var f=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(f.clientX,f.clientY);s(),d&&!d.el.contains(u)&&(i("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function lt(){}lt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=pe(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),o&&o.animateAll()},drop:Mt};Z(lt,{pluginName:"revertOnSpill"});function st(){}st.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable,r=o||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:Mt};Z(st,{pluginName:"removeOnSpill"});h.mount(new sn);h.mount(st,lt);const dt={hideModals(n){n.target.closest(".modal").classList.remove("is-active")}},P={makeLabelInDOM(n,e){const t=P.createLabelElm(n),o=document.querySelector(`[data-card-id="${e}"] .label-list`);t.addEventListener("dblclick",P.removeAssociationWithCard),o.append(t)},createLabelElm(n){const e=document.createElement("span");return e.classList.add("tag"),e.dataset.labelId=n.id,e.textContent=n.name,e},async openModalAddLabel(n){const e=document.querySelector("#associateLabelToCardModal");e.classList.add("is-active");const o=n.currentTarget.closest("[data-card-id]").dataset.cardId,r=e.querySelector('input[name="cardId"]');r.value=o;const a=await P.getAllLabels(),i=e.querySelector(".list-label");i.textContent="",a.forEach(l=>{const s=P.createLabelElm(l);s.addEventListener("dblclick",P.handleAssociateToCard),i.append(s)})},async getAllLabels(){try{const n=await fetch("/labels");if(!n.ok)throw new Error(n.status);return n.json()}catch(n){console.error(n),alert(n)}},async handleAssociateToCard(n){const t=n.currentTarget.dataset.labelId,r=document.querySelector('#associateLabelToCardModal input[name="cardId"]').value;try{const a=await fetch(`/cards/${r}/labels/${t}`,{method:"PUT"});if(!a.ok)throw new Error(a.status);const i=await a.json(),l=document.querySelector(`[data-card-id="${i.id}"] .label-list`);l.textContent="",i.labels.forEach(s=>{P.makeLabelInDOM(s,i.id)})}catch(a){console.error(a),alert(a)}},async removeAssociationWithCard(n){const e=n.currentTarget,t=e.dataset.labelId,r=e.closest("[data-card-id]").dataset.cardId;try{const a=await fetch(`/cards/${r}/labels/${t}`,{method:"DELETE"});if(!a.ok)throw new Error(a.status);e.remove()}catch(a){console.error(a),alert(a)}},async showManageLabelsModal(){const n=document.querySelector("#manageLabelsModal");n.classList.add("is-active");try{const e=await P.getAllLabels(),t=n.querySelector(".labels-list");t.textContent="",e.forEach(o=>{const r=P.createLabelFormElm(o);t.append(r)})}catch(e){alert(e)}},async handleAddLabelForm(n){n.preventDefault();const e=new FormData(n.currentTarget),t=e.get("id");try{const o=await fetch(`/labels/${t||""}`,{method:t?"PATCH":"POST",body:e});if(!o.ok)throw new Error(o.status);const r=await o.json();if(t)document.querySelectorAll(`[data-label-id="${t}"]`).forEach(i=>{i.textContent=r.name});else{const a=P.createLabelFormElm(r);document.querySelector("#manageLabelsModal .labels-list").append(a),n.target.querySelector('[name="name"]').value=""}}catch(o){alert(o)}},createLabelFormElm(n){const e=document.getElementById("formAddLabel"),t=document.importNode(e,!0);t.removeAttribute("id"),t.querySelector('[name="name"]').value=n.name,t.querySelector('[name="id"]').value=n.id;const o=document.createElement("button");return o.classList.add("button","is-small","is-danger"),o.type="button",o.textContent="Supprimer",o.addEventListener("click",P.handleDeleteLabel),t.addEventListener("submit",P.handleAddLabelForm),t.querySelector(".field").append(o),t},async handleDeleteLabel(n){if(!confirm("Êtes-vous sûr de vouloir supprimer ce label ?"))return;n.preventDefault();const e=n.currentTarget.closest("form"),t=e.querySelector('[name="id"]').value;try{const o=await fetch(`/labels/${t}`,{method:"DELETE"});if(!o.ok)throw new Error(o.status);const r=document.querySelectorAll(`[data-label-id="${t}"]`);for(const a of r)a.remove();e.remove()}catch(o){alert(o)}}},j={showAddCardModal(n){const e=document.querySelector("#addCardModal");e.classList.add("is-active");const r=n.currentTarget.closest("[data-list-id]").dataset.listId,a=e.querySelector('input[name="list_id"]');a.value=r},async handleAddCardForm(n){n.preventDefault();const e=n.currentTarget,t=new FormData(e),o=t.get("list_id"),r=document.querySelectorAll(`[data-list-id="${o}"] [data-card-id]`).length;t.set("position",r);try{const a=await fetch("/cards",{method:"POST",body:t});if(!a.ok)throw new Error("Une erreur est survenue");const i=await a.json();j.makeCardInDOM(i),dt.hideModals(n),e.reset()}catch(a){console.error(a),alert(a)}},makeCardInDOM(n){const e=document.querySelector("#templateCard"),t=document.importNode(e.content,!0),o=t.querySelector(".card-content");o.textContent=n.content;const r=t.querySelector("[data-card-id]");r.dataset.cardId=n.id,t.querySelector(".btn-edit-card").addEventListener("click",j.showEditCardForm),t.querySelector(".btn-delete-card").addEventListener("click",j.handleRemoveCard),t.querySelector(".form-edit-card").addEventListener("submit",j.handleEditCardForm),t.querySelector(".add-label").addEventListener("click",P.openModalAddLabel),document.querySelector(`[data-list-id="${n.list_id}"] .panel-block`).append(t)},showEditCardForm(n){n.preventDefault();const t=n.currentTarget.closest("[data-card-id]"),o=t.querySelector(".card-container"),r=t.querySelector(".form-edit-card");o.classList.add("is-hidden"),r.classList.remove("is-hidden")},async handleEditCardForm(n){n.preventDefault();const e=n.currentTarget,t=new FormData(e),o=e.closest("[data-card-id]"),r=o.dataset.cardId;try{const i=await fetch(`/cards/${r}`,{method:"PATCH",body:t});if(!i.ok)throw new Error("Une erreur est survenue");const l=await i.json(),s=o.querySelector(".card-content");s.textContent=l.content,e.reset()}catch(i){console.error(i),alert(i)}o.querySelector(".card-container").classList.remove("is-hidden"),e.classList.add("is-hidden")},async handleRemoveCard(n){if(n.preventDefault(),!confirm("Voulez-vous vraiment supprimer cette carte ?"))return;const t=n.currentTarget.closest("[data-card-id]"),o=t.dataset.cardId;try{if(!(await fetch(`/cards/${o}`,{method:"DELETE"})).ok)throw new Error("Une erreur est survenue");t.remove()}catch(r){console.error(r),alert(r)}},handleDropCard(n){const e=n.from.closest("[data-list-id]"),t=n.to.closest("[data-list-id]");j.updateAllCards(e),e!==t&&j.updateAllCards(t)},updateAllCards(n){const e=n.dataset.listId;n.querySelectorAll("[data-card-id]").forEach((o,r)=>{const a=o.dataset.cardId,i=new FormData;i.append("position",r),i.append("list_id",e),fetch(`/cards/${a}`,{method:"PATCH",body:i})})}},V={showAddListModal(n){document.querySelector("#addListModal").classList.add("is-active")},async handleAddListForm(n){n.preventDefault();const e=n.currentTarget,t=document.querySelectorAll("[data-list-id]").length,o=new FormData(e);o.set("position",t);try{const r=await fetch("/lists",{method:"POST",body:o});if(!r.ok)throw new Error("Erreur de chargement des données");const a=await r.json();V.makeListInDOM(a),e.reset(),dt.hideModals(n)}catch(r){console.error(r),alert(r)}},makeListInDOM(n){const e=document.querySelector("#templateList"),t=document.importNode(e.content,!0),o=t.querySelector(".list-title");o.textContent=n.name;const r=t.querySelector("[data-list-id]");r.dataset.listId=n.id,t.querySelector(".add-card-btn").addEventListener("click",j.showAddCardModal),o.addEventListener("dblclick",V.showEditForm),t.querySelector(".remove-list-btn").addEventListener("click",V.handleDeleteList),t.querySelector(".edit-list-form").addEventListener("submit",V.handleSubmitEditListForm);const s=t.querySelector(".panel-block");h.create(s,{group:"card",onEnd:j.handleDropCard}),document.querySelector(".card-lists").appendChild(t)},async getListsFromAPI(){try{const n=await fetch("/lists");if(!n.ok)throw new Error("Erreur de chargement des données");const e=await n.json();console.log(e);for(const t of e){V.makeListInDOM(t);for(const o of t.cards){j.makeCardInDOM(o);for(const r of o.labels)P.makeLabelInDOM(r,o.id)}}}catch(n){console.error(n),alert(n)}},showEditForm(n){const e=n.currentTarget,t=e.closest("div").querySelector("form");e.classList.add("is-hidden"),t.classList.remove("is-hidden")},async handleSubmitEditListForm(n){n.preventDefault();const e=n.currentTarget,t=new FormData(e),o=e.closest("[data-list-id]"),r=o.dataset.listId,a=o.querySelector(".list-title");try{const i=await fetch(`/lists/${r}`,{method:"PATCH",body:t});if(!i.ok)throw new Error("Erreur de chargement des données");const l=await i.json();a.textContent=l.name}catch(i){console.error(i),alert(i)}e.classList.add("is-hidden"),a.classList.remove("is-hidden")},async handleDeleteList(n){if(!confirm("Etes vous sur de vouloir supprimer cette liste ?"))return;const t=n.currentTarget.closest("[data-list-id]"),o=t.dataset.listId;try{if(!(await fetch(`/lists/${o}`,{method:"DELETE"})).ok)throw new Error("Erreur de chargement des données");t.remove()}catch(r){console.error(r),alert(r)}},handleDropList(n){document.querySelectorAll("[data-list-id]").forEach((t,o)=>{const r=t.dataset.listId,a=new FormData;a.append("position",o),fetch(`/lists/${r}`,{method:"PATCH",body:a})})}},xt={init:function(){console.log("app.init !"),xt.addListenerToActions(),V.getListsFromAPI()},addListenerToActions(){document.querySelector("#addListButton").addEventListener("click",V.showAddListModal);const e=document.querySelectorAll(".modal .close");for(const l of e)l.addEventListener("click",dt.hideModals);document.querySelector("#addListModal form").addEventListener("submit",V.handleAddListForm),document.querySelector("#addCardModal form").addEventListener("submit",j.handleAddCardForm),document.querySelector("#manageLabelsButton").addEventListener("click",P.showManageLabelsModal),document.querySelector("#formAddLabel").addEventListener("submit",P.handleAddLabelForm);const i=document.querySelector(".card-lists");h.create(i,{onUpdate:V.handleDropList})}};document.addEventListener("DOMContentLoaded",xt.init);
